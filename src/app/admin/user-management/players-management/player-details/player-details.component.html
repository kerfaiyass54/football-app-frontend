<app-loader [visible]="loading()"></app-loader>

@if (!loading()) {

  <div class="player-wrapper">

    <div class="player-card animate-card">

      <div class="player-header">
        <h2 class="player-name">{{ player?.name }}</h2>
        <span class="status-badge">
          {{ player?.status }}
        </span>
      </div>

      <div class="player-info">

        @if(player?.nationality){
          <div class="info-box nationality">
            <img
              [src]="'https://flagcdn.com/w40/' + countryCode + '.png'"
              class="flag-img"
              alt="flag"
            />
            <span>{{ player?.nationality }}</span>
          </div>
        }

        <div class="info-box">
          <i class="bi bi-calendar-event"></i>
          <span>{{ player?.yearOfBirth }}</span>
        </div>

        <div class="info-box">
          <i class="bi bi-person-badge"></i>
          <span>{{ player?.position }}</span>
        </div>

        <div class="info-box price">
          <i class="bi bi-currency-euro"></i>
          <span>â‚¬ {{ player?.price }}</span>
        </div>

      </div>

      <div class="player-actions">
        <button class="btn-update"
                data-bs-toggle="modal"
                data-bs-target="#updateStatusModal">
          Update Status
        </button>

        <button class="btn-delete"
                data-bs-toggle="modal"
                data-bs-target="#deleteModal">
          Delete
        </button>
      </div>

    </div>

    <app-previous-button></app-previous-button>

  </div>
}

<!-- DELETE MODAL -->
<div class="modal fade custom-modal" id="deleteModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header custom-header">
        <h5 class="modal-title">Delete Player</h5>
        <button type="button"
                class="btn-close btn-close-white"
                data-bs-dismiss="modal">
        </button>
      </div>

      <div class="modal-body text-center">
        Are you sure you want to delete this player?
      </div>

      <div class="modal-footer custom-footer">
        <button class="btn-cancel"
                data-bs-dismiss="modal">
          Cancel
        </button>

        <button class="btn-delete-confirm"
                (click)="confirmDelete()">
          Delete
        </button>
      </div>

    </div>
  </div>
</div>

<<!-- UPDATE STATUS MODAL -->
<div class="modal fade custom-modal" id="updateStatusModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header custom-header">
        <h5 class="modal-title">Update Player Status</h5>
        <button type="button"
                class="btn-close btn-close-white"
                data-bs-dismiss="modal">
        </button>
      </div>

      <div class="modal-body">
        <label class="custom-label">Select Status</label>

        <select class="form-select custom-input"
                [(ngModel)]="newStatus">

          <option value="">Select...</option>

          <option value="NEW">NEW</option>
          <option value="PLAYING">PLAYING</option>
          <option value="FREE_AGENT">FREE_AGENT</option>
          <option value="INJURED">INJURED</option>
          <option value="BANNED">BANNED</option>
          <option value="RETIRED">RETIRED</option>

        </select>
      </div>

      <div class="modal-footer custom-footer">
        <button class="btn-cancel"
                data-bs-dismiss="modal">
          Cancel
        </button>

        <button class="btn-update-confirm"
                (click)="confirmUpdateStatus()">
          Update
        </button>
      </div>

    </div>
  </div>
</div>
